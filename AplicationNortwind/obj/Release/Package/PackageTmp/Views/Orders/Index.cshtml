@model IEnumerable<AplicationNortwind.Models.Orders>
@using PagedList.Mvc;
@using PagedList;

<script>
        history.pushState(null, null, document.URL);
        window.addEventListener('popstate', function () {
            history.pushState(null, null, document.URL);
        });

</script>
@{
    ViewBag.Title = "Ordenes";
}

<h2>Ordenes</h2>
<div>
    <div class="col-md-4" style="padding-left: 0px;">
        <a href="@Url.Action("Create", "Orders")" class="btn btn-primary">
            <span class="glyphicon glyphicon-plus"></span> Crear Nueva Orden
        </a>
        <br />
        <br />
    </div>

    <div class="col-md-4" style="padding-left: 1065px !important;">
        <a href="@Url.Action("ExportToExcel", "Orders")" class="btn btn-success">
            <span class="glyphicon glyphicon-save"></span> Exportar
        </a>
        <br />
        <br />
    </div>
</div>


<table class="table table-bordered">
    <tr>
        <th>
            @Html.DisplayNameFor(model => model.OrderDate)
        </th>
        @*<th>
            @Html.DisplayNameFor(model => model.RequiredDate)
        </th>*@
        <th>
            @Html.DisplayNameFor(model => model.ShippedDate)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Freight)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.ShipName)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.ShipAddress)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.ShipCity)
        </th>
        @*<th>
            @Html.DisplayNameFor(model => model.ShipRegion)
        </th>*@
        <th>
            @Html.DisplayNameFor(model => model.ShipPostalCode)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.ShipCountry)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Customers.CompanyName)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Employees.LastName)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Shippers.CompanyName)
        </th>
        <th>
            Acción
        </th>
    </tr>

    @foreach (var item in Model) {
        <tr>
            <td>
                @Html.DisplayFor(modelItem => item.OrderDate)
            </td>
            @*<td>
            @Html.DisplayFor(modelItem => item.RequiredDate)
        </td>*@
            <td>
                @Html.DisplayFor(modelItem => item.ShippedDate)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.Freight)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.ShipName)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.ShipAddress)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.ShipCity)
            </td>
            @*<td>
            @Html.DisplayFor(modelItem => item.ShipRegion)
        </td>*@
            <td>
                @Html.DisplayFor(modelItem => item.ShipPostalCode)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.ShipCountry)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.Customers.CompanyName)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.Employees.LastName)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.Shippers.CompanyName)
            </td>
            <td>      
                <a href="@Url.Action("Edit", "Orders", new { id = item.OrderID})" class="btn btn-primary btn-xs" title="Editar">                   
                    <span class="glyphicon glyphicon-pencil" aria-hidden="true"></span>
                </a>
                
                <a href="@Url.Action("Details", "Orders", new {id = item.OrderID})" class="btn btn-warning btn-xs" title="Ver Detalle">
                    <span class="glyphicon glyphicon-list-alt" aria-hidden="true"></span>
                </a>
                
                <a href="@Url.Action("Delete", "Orders", new { id = item.OrderID})" class="btn btn-danger btn-xs" title="Eliminar">
                    <span class="glyphicon glyphicon-trash" aria-hidden="true"></span>
                </a>                      
            </td>
        </tr>
    }

</table>

@Html.PagedListPager((IPagedList)ViewBag.OnePageOfOrders, page => Url.Action("Index", new { page }))
